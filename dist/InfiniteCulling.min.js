!function(n,t){"use strict";var r=t();"function"==typeof define&&define.amd?define([],function(){return n.InfiniteCulling=r,r}):"object"==typeof exports?module.exports=r:n.InfiniteCulling=r}(this,function(){"use strict";function n(n,t){return n>=t}function t(n,t){return t>n}function r(n,t){return n>t}function i(n,t){return t>=n}function e(n){return n[P]}function o(n){return n[E]}function u(n){return n.top}function f(n){return n.left}function c(n){return n.right}function a(n){return n.bottom}function s(n,t,r,i){for(var e=t-1;e>=0&&!i(o(n[e]),r);)e--;return e+1}function l(n,t,r,i){for(var e=t,u=n.length;u>e&&!i(o(n[e]),r);)e++;return e}function h(n,t,r){return n.slice(t,r).map(e)}function v(n,t){return o(n)-o(t)}function p(n,t){return o(t)-o(n)}function b(n,t,r){return t.map(function(t,r){return[n(t),r]}).sort(r?p:v)}function g(n){return function(t){n[t]=!0}}function d(n,t){var r={},i=g(r);return h(n,0,t).forEach(i),r}function y(n,t,r,i,e,o){var u=(n?l:s)(t,r,i,e);return h(t,n?r:u,n?u:r).forEach(o),u}function m(n,t){for(var r,i=0,e=n.length;e>i;)r=i+e>>>1,o(n[r])<t?i=r+1:e=r;return i}function O(n,t){for(var r,i=0,e=n.length;e>i;)r=i+e>>>1,t>o(n[r])?e=r:i=r+1;return i}function j(n,t){var r,i,e=n.indexOf(t);if(-1===e)for(r=0,i=n.length;i>r;r++)if(Object.getPrototypeOf(n[r])===t){e=r;break}return e}function k(n,t){var r,i,o;for(r=-1,i=0,o=n.length;o>i;i++)if(e(n[i])===t){n.splice(i,1),r=i;break}return r}function x(){function e(n){return n.left<=C&&n.right>=w&&n.top<=q&&n.bottom>=I}function o(n){var t=P[n];t.style.visibility=e(t)?"visible":"hidden"}function s(){var n=d(z,F),t=d(A,G),r=d(B,H),i=d(D,J);Object.keys(n).forEach(function(n){t.hasOwnProperty(n)&&r.hasOwnProperty(n)&&i.hasOwnProperty(n)&&(P[n].style.visibility="visible")})}function l(n,t,r){P=n,I=t.top,w=t.left,C=t.right,q=t.bottom,z=b(u,P,!1),A=b(f,P,!1),B=b(c,P,!0),D=b(a,P,!0),F=m(z,q),G=m(A,C),H=O(B,w),J=O(D,I),r&&s()}function h(e,u,f,c){var a={},s=!1,l=g(a);e!==I&&(s=I>e,J=y(s,D,J,e,s?t:n,l)),u!==w&&(s=w>u,H=y(s,B,H,u,s?t:n,l)),f!==C&&(s=f>C,G=y(s,A,G,f,s?r:i,l)),c!==q&&(s=c>q,F=y(s,z,F,c,s?r:i,l)),I=e,w=u,C=f,q=c,Object.keys(a).forEach(o)}function v(n){var t=n.top,r=n.left,i=n.right,e=n.bottom,u=P.indexOf(n),f=m(z,t),c=m(A,r),a=O(B,i),s=O(D,e);-1===u&&(u=P.length,P.push(n)),z.splice(f,0,[t,u]),A.splice(c,0,[r,u]),B.splice(a,0,[i,u]),D.splice(s,0,[e,u]),F>f&&F++,G>c&&G++,H>a&&H++,J>s&&J++,o(u)}function p(n){var t=k(z,n);-1!==t&&F>t&&F--,t=k(A,n),-1!==t&&G>t&&G--,t=k(B,n),-1!==t&&H>t&&H--,t=k(D,n),-1!==t&&J>t&&J--}function x(n){var t=j(P,n);return-1===t?null:(p(t),P[t])}function E(n,t){var r=x(n)||n;t&&t(r),v(r)}var P,w,C,I,q,z,A,B,D,F,G,H,J;this.init=l,this.move=h,this.add=v,this.remove=x,this.update=E}var E=0,P=1;return x});